<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 
	root 엘리먼트 이름은 mapper입니다. 
	ibatis에서는 SqlMap이었습니다.
	namespace는 지정을 해도 되고 안해도 됩니다. ibatis에서는 네임스페이스 사용여부를
	설정에서 명시적으로 선언해줘야 했지만, myBatis에서는 따로 설정할 필요가 없이, namespace attribute
	가 없으면 네임스페이스 안쓰는걸로, 있으면 쓰는걸로 자동으로 되는듯 싶습니다.
-->
<mapper namespace="Default">
	<!--
		select 태그를 사용하여 select 쿼리를 만듭니다.
		parameterType: iBatis의 parameterClass의 역할로 전달 인자의 타입을 선언합니다
		resultType : iBatis의 resultClass와 같은 역할로 처음 선언했던 Configuration.xml의 
		typeAlias를 나타냅니다.
	-->
	<select id="selectSample" resultType="java.util.HashMap" parameterType="java.util.HashMap">
select * from server_list  where server_id = #{id}
	</select>
	
	<insert id="insertServerData" parameterType="java.util.HashMap">
insert into server_data (
   server_id
  ,created_date
  ,status
  ,image
  ,latency
  ,vm_total_mem
  ,vm_free_mem
  ,os_total_mem
  ,os_free_mem
  ,disk_total_space
  ,disk_free_space
) VALUES (
   #{server_id}   					-- server_id - IN int(11)
  ,#{created_date}  				-- created_date - IN varchar(50)
  ,#{status}  							-- status - IN varchar(30)
  ,#{image}  								-- image - IN varchar(150)
  ,#{latency}   						-- latency - IN int(11)
  ,#{vm_total_mem}   				-- cpu - IN int(11)
  ,#{vm_free_mem}   				-- cpu - IN int(11)
  ,#{os_total_mem}   				-- cpu - IN int(11)
  ,#{os_free_mem}   				-- cpu - IN int(11)
  ,#{disk_total_space}   		-- cpu - IN int(11)
  ,#{disk_free_space}   		-- cpu - IN int(11)
)
	</insert>
	
	<select id="getMenuInfoList" parameterType="java.util.HashMap" resultType="java.util.LinkedHashMap">
		select * 
		  from server_list
		 where 1 = 1
		 <if test="pgm_syscd == null">
		   and parent_id = '0'
		 </if>
		 <if test="pgm_syscd != null">
		   and parent_id = #{pgm_syscd}
		 </if>
	</select>
	
	<select id="sampleSelectList" resultType="java.util.HashMap" parameterType="java.util.HashMap">
select * from server_data where server_id = #{serverId}
	</select>
	
	<select id="sampleSelectOne" resultType="java.util.HashMap" parameterType="java.util.HashMap">
select server_name from server_list where server_id = #{serverId}
	</select>
	
</mapper>